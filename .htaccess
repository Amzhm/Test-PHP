# Configuration pour le portfolio XML/XSL
RewriteEngine On

# Redirection de l'index.html vers index.php
RewriteRule ^index\.html$ index.php [R=301,L]

# URLs conviviales pour les robots
# /fr/accueil -> index.php?lang=fr&section=accueil
RewriteRule ^([a-z]{2})/([a-z]+)/?$ index.php?lang=$1&section=$2 [L,QSA]

# /fr -> index.php?lang=fr&section=accueil
RewriteRule ^([a-z]{2})/?$ index.php?lang=$1&section=accueil [L,QSA]

# Page d'accueil par défaut
RewriteRule ^$ index.php?lang=fr&section=accueil [L,QSA]

# Configuration des types MIME
AddType application/xml .xml
AddType application/xslt+xml .xsl

# Configuration de cache pour les fichiers statiques
<FilesMatch "\.(css|js|xml|xsl)$">
    ExpiresActive On
    ExpiresDefault "access plus 1 hour"
</FilesMatch>

# Configuration de sécurité
<Files "*.xml">
    Order Allow,Deny
    Allow from all
</Files>

<Files "*.xsl">
    Order Allow,Deny
    Allow from all
</Files>

# En-têtes de sécurité
Header always set X-Content-Type-Options nosniff
Header always set X-Frame-Options DENY
Header always set X-XSS-Protection "1; mode=block"

# Configuration pour les robots
<IfModule mod_rewrite.c>
    # Permettre aux robots de crawler les URLs avec paramètres
    RewriteCond %{HTTP_USER_AGENT} (googlebot|bingbot|slurp|duckduckbot) [NC]
    RewriteRule .* - [E=ROBOT:1]
</IfModule>
